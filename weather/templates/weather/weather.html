{% extends "base.html" %}
{% load static %}

{% block title %}WeatherCast â€” Dashboard{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'weather/css/weather.css' %}?v=5">
{% endblock %}

{% block content %}
  <!-- ===== SEARCH BAR (weather-specific) ===== -->
  <div class="weather-search">
    <div class="search-wrapper">
      <i data-lucide="search" class="search-icon"></i>
      <input type="text" class="search-input" id="searchInput" placeholder="Search city..." autocomplete="off">
      <div class="search-results" id="searchResults"></div>
    </div>
    <button class="btn-location" id="btnLocation">
      <i data-lucide="map-pin" class="btn-icon"></i>
      <span class="btn-location-text">My Location</span>
    </button>
  </div>

  <!-- ===== WELCOME ===== -->
  <div class="state-message" id="welcomeState">
    <div class="state-icon"><i data-lucide="globe"></i></div>
    <h2>Check the forecast</h2>
    <p>Search for any city worldwide or allow location access to get your local weather instantly.</p>
  </div>

  <!-- ===== LOADING ===== -->
  <div class="state-message" id="loadingState" style="display:none;">
    <div class="spinner"></div>
    <h2>Fetching weather data</h2>
    <p>Retrieving conditions and forecast...</p>
  </div>

  <!-- ===== DASHBOARD ===== -->
  <div class="dashboard" id="dashboard">

    <!-- Hero -->
    <div class="hero-card card" id="heroCard">
      <div class="hero-lava">
        <span class="lava-blob blob-1"></span>
        <span class="lava-blob blob-2"></span>
        <span class="lava-blob blob-3"></span>
      </div>
      <div class="hero-left">
        <div class="hero-location">
          <div class="hero-city" id="cityName">--</div>
          <div class="hero-country" id="countryName"></div>
        </div>
        <div class="hero-condition" id="currentCondition">--</div>
        <div class="hero-temp-row">
          <div class="hero-icon" id="currentIcon"></div>
          <div class="hero-temp" id="currentTemp">--<span class="hero-temp-unit">&deg;C</span></div>
        </div>
      </div>
      <div class="hero-right">
        <div class="clock-label">Local Time</div>
        <div class="clock-time" id="clockTime">--:--</div>
        <div class="clock-date" id="clockDate"></div>
      </div>
    </div>

    <!-- Activity Scores -->
    <div class="scores-section" id="scoresSection" style="display:none;">
      <div class="section-title">Activity Scores</div>
      <div class="scores-grid" id="scoresGrid"></div>
    </div>

    <!-- Detail cards -->
    <div class="details-grid" id="detailsGrid">
      <div class="detail-card card">
        <div class="detail-header">
          <span class="detail-icon"><i data-lucide="thermometer"></i></span>
          <span class="detail-label">Feels like</span>
        </div>
        <div class="detail-value" id="feelsLike">--</div>
      </div>
      <div class="detail-card card">
        <div class="detail-header">
          <span class="detail-icon"><i data-lucide="droplets"></i></span>
          <span class="detail-label">Humidity</span>
        </div>
        <div class="detail-value" id="humidity">--</div>
      </div>
      <div class="detail-card card">
        <div class="detail-header">
          <span class="detail-icon"><i data-lucide="wind"></i></span>
          <span class="detail-label">Wind</span>
        </div>
        <div class="detail-value" id="windSpeed">--</div>
        <div class="detail-sub" id="windDir"></div>
      </div>
      <div class="detail-card card">
        <div class="detail-header">
          <span class="detail-icon"><i data-lucide="sun"></i></span>
          <span class="detail-label">UV Index</span>
        </div>
        <div class="detail-value" id="uvIndex">--</div>
        <div class="detail-sub" id="uvLabel"></div>
      </div>
      <div class="detail-card card">
        <div class="detail-header">
          <span class="detail-icon"><i data-lucide="gauge"></i></span>
          <span class="detail-label">Pressure</span>
        </div>
        <div class="detail-value" id="pressure">--</div>
      </div>
      <div class="detail-card card">
        <div class="detail-header">
          <span class="detail-icon"><i data-lucide="flag"></i></span>
          <span class="detail-label">Max Wind</span>
        </div>
        <div class="detail-value" id="maxWind">--</div>
      </div>
    </div>

    <!-- Sunrise / Sunset -->
    <div class="sun-card-wrap">
      <div class="sun-card card">
        <div class="sun-icon"><i data-lucide="sunrise"></i></div>
        <div class="sun-info">
          <div class="sun-label">Sunrise</div>
          <div class="sun-time" id="sunrise">--:--</div>
        </div>
      </div>
      <div class="sun-card card">
        <div class="sun-icon"><i data-lucide="sunset"></i></div>
        <div class="sun-info">
          <div class="sun-label">Sunset</div>
          <div class="sun-time" id="sunset">--:--</div>
        </div>
      </div>
    </div>

    <!-- Hourly forecast -->
    <div class="hourly-section">
      <div class="section-title">Next 24 Hours</div>
      <div class="hourly-card card">
        <div class="hourly-scroll" id="hourlyScroll"></div>
      </div>
    </div>

    <!-- 7-day forecast -->
    <div class="forecast-section">
      <div class="section-title">7-Day Forecast</div>
      <div class="forecast-card card" id="forecastList"></div>
    </div>

  </div><!-- /dashboard -->
{% endblock %}

{% block extra_js %}
  <script type="module" src="{% static 'weather/js/app.js' %}?v=5"></script>
{% endblock %}
